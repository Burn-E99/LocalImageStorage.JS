!function(a){"use strict";function b(){var a={},b="V1.0.0";return a.GetAvailableSpace=function(){function b(a){return new Array(1024*a+1).join("a")}var a;try{for(var c=0;c<=1e4;c+=250)localStorage.setItem("test",b(c))}catch(b){localStorage.removeItem("test"),a=c?c-250:0}return a},a.AddImage=function(b,c){var d=new Image;d.setAttribute("crossOrigin","anonymous"),d.src=b,d.onload=function(){var e=document.createElement("canvas");e.id="LIS_Canvas",e.style.display="none",e.width=d.width,e.height=d.height,document.body.appendChild(e);var f=e.getContext("2d");f.drawImage(d,0,0);var g=e.toDataURL("");if(a.GetAvailableSpace()<2*g.length/1024)throw{error:"Image too large!",message:"This web browser has no more space to 'offline' images.  Use this error to know when to stop saving to localstorage."};localStorage.setItem("LIS_"+c,g);var h=document.getElementById("LIS_Canvas");return h.parentElement.removeChild(h),"Saved!"}},a.GetImage=function(a){return localStorage.getItem("LIS_"+a)},a.RemoveImage=function(a){return localStorage.removeItem("LIS_"+a),"Removed!"},a.InitializeImage=function(b,c){return new Promise(function(d,e){if(localStorage.getItem("LIS_"+c))d(a.GetImage(c));else{var f=new Image;f.setAttribute("crossOrigin","anonymous"),f.src=b,f.onload=function(){var e=document.createElement("canvas");e.id="LIS_Canvas",e.style.display="none",e.width=f.width,e.height=f.height,document.body.appendChild(e);var g=e.getContext("2d");g.drawImage(f,0,0);var h=e.toDataURL("");if(a.GetAvailableSpace()<2*h.length/1024)throw{error:"Image too large!",message:"This web browser has no more space to 'offline' images.  Use this error to know when to stop saving to localstorage."};localStorage.setItem("LIS_"+c,h);var i=document.getElementById("LIS_Canvas");i.parentElement.removeChild(i),d(a.GetImage(c))}}})},a.Version=function(){return b},a}"undefined"==typeof LocalImageStorage?a.LocalImageStorage=b():console.log("pre-defined")}(window);